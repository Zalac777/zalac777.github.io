<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Game s Dropdown Izbornikom</title>

<style>
   
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    background-color: hsl(80, 50%, 70%);
    transition: background 1s ease-in-out;
}

/* ===== Naslov ===== */
h1 {
    margin: 0 0 30px 0; /* uklonjen default razmak iznad, 30px ispod */
    text-align: center;
    font-size: 50px;
}

/* ===== Top controls (dropdown + gumb) ===== */
.top-controls {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 40px;
    width: 100%;
    max-width: 800px;
    justify-content: center; /* centriranje */
}

/* Dropdown dugme */
.dropdown-button {
    background: #007bff;
    color: white;
    padding: 10px 18px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    font-size: 16px;
    min-width: 150px;
    text-align: center;
}

.dropdown-button:hover {
    background: #005fcc;
}

/* Dropdown meni */
.dropdown-menu {
    position: absolute;
    top: 45px;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 220px; /* širi meni */
    display: none;
    flex-direction: column;
    z-index: 999;
}

.dropdown-menu.show {
    display: flex;
}

.dropdown-item {
    padding: 10px;
    cursor: pointer;
    width: 100%;
    box-sizing: border-box;
}

.dropdown-item:hover {
    background: #eee;
}

/* ===== Game board ===== */
/* ===== Game board ===== */
.game-board {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 kolone stalno */
    gap: 15px;
    width: min(90vw, 90vh); /* automatsko skaliranje */
    max-width: 800px;
    margin-bottom: 30px;
}

.card {
    position: relative;
    width: 100%;
    height: 0;
    padding-top: 150%; /* pravokutni oblik */
    perspective: 1000px;
}

.card-inner {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    transform-style: preserve-3d;
    transition: transform 0.5s;
    cursor: pointer;
}

.card.flipped .card-inner {
    transform: rotateY(180deg);
}

.card-front, .card-back {
    position: absolute;
    width: 100%; height: 100%;
    backface-visibility: hidden;
    border-radius: 8px;
}

.card-front::before {
    content: "";
    position: absolute;
    top: 12px;
    left: 12px;
    right: 12px;
    bottom: 12px;
    border: 1px solid black;
    border-radius: 8px;
    background-color: hsl(0,0%,60%);
    background-image: 
        repeating-linear-gradient(45deg, blue, blue 1px, transparent 1px, transparent 5px),
        repeating-linear-gradient(135deg, blue, blue 1px, transparent 1px, transparent 5px);
    pointer-events: none;
}

.card-front {
    background-color: hsl(0, 0%, 90%);
}

.card-back {
    transform: rotateY(180deg);
    background-size: cover;
    background-position: center;
}

/* Poruka pobjede */
#message {
    margin-top: 20px;
    font-size: 50px;
    font-weight: bold;
    text-align: center;
    color: white;
}

/* ===== VATROMET CANVAS ===== */
#fireworksCanvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999;
    display: none;
}

/* ===== MEDIA QUERIES ZA MOBITELE ===== */
@media (max-width: 600px) {
    /* Body padding manji */
    body {
        padding: 5px;
    }

    /* Naslov manji font */
    h1 {
        font-size: 20px;
        margin-bottom: 10px;
    }

    /* Top-controls manji gap */
    .top-controls {
		margin-bottom: 10px;  /* razmak između izbornika i boarda */
        gap: 15px;
    }

    /* Dugmad manji font i padding */
    .dropdown-button {
        font-size: 14px;
        padding: 8px 12px;
        min-width: 120px;
    }

    /* Dropdown meni manji */
    .dropdown-menu {
        width: 160px;
    }

    /* Poruka manji font */
    #message {
        font-size: 20px;
        margin-top: 2px;
    }

    /* Manji razmak između kartica */
    .game-board {
        gap: 10px;
    }
}
</style>
</head>

<body>

<h1>Razgvatemaljivanje memory gayme</h1>

<div class="top-controls">
    <div class="dropdown">
        <button class="dropdown-button">Broj karata ▼</button>
        <div class="dropdown-menu">
            <div class="dropdown-item" data-value="4">4 karte (2 para)</div>
            <div class="dropdown-item" data-value="8">8 karata (4 para)</div>
            <div class="dropdown-item" data-value="12">12 karata (6 parova)</div>
            <div class="dropdown-item" data-value="16">16 karata (8 parova)</div>
        </div>
    </div>

    <button id="startGame" class="dropdown-button" style="background:#28a745;">Pokreni igru</button>
</div>

<div class="game-board"></div>

<div id="message"></div>
<canvas id="fireworksCanvas"></canvas>

<script>
/* === VATROMET === */
function startFireworks(duration = 4000) {
    const canvas = document.getElementById("fireworksCanvas");
    const ctx = canvas.getContext("2d");

    canvas.style.display = "block";
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles = [];
    let running = true;

    function random(min, max) {
        return Math.random() * (max - min) + min;
    }

    class Particle {
        constructor(x, y) {
            this.x = x;
            this.y = y;
            this.speed = random(1, 4);
            this.angle = random(0, Math.PI * 2);
            this.alpha = 1;
        }

        update() {
            this.x += Math.cos(this.angle) * this.speed;
            this.y += Math.sin(this.angle) * this.speed;
            this.alpha -= 0.02;
        }

        draw() {
            ctx.fillStyle = `hsla(${Math.random() * 360}, 100%, 50%, ${this.alpha})`;
            ctx.beginPath();
            ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    function createExplosion() {
        let x = random(100, canvas.width - 100);
        let y = random(50, canvas.height / 2);
        for (let i = 0; i < 50; i++) {
            particles.push(new Particle(x, y));
        }
    }

    function animate() {
        if (!running) return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if (Math.random() < 0.1) createExplosion();
        particles.forEach((p, i) => {
            p.update();
            p.draw();
            if (p.alpha <= 0) particles.splice(i, 1);
        });
        requestAnimationFrame(animate);
    }

    animate();

    setTimeout(() => {
        running = false;
        canvas.style.display = "none";
    }, duration);
}

/* === AUDIO === */
const flipSound  = new Audio("audio/flip.wav");
const matchSound = new Audio("audio/match.mp3");
const winSound   = new Audio("audio/I_ain't_gay.mp3");

document.addEventListener("click", function enableAudio() {
    flipSound.play().catch(()=>{});
    flipSound.pause(); flipSound.currentTime = 0;
    matchSound.play().catch(()=>{});
    matchSound.pause(); matchSound.currentTime = 0;
    winSound.play().catch(()=>{});
    winSound.pause(); winSound.currentTime = 0;
    document.removeEventListener("click", enableAudio);
}, { once: true });

/* === KARTE === */
const allImages = [
    "images/slika1.jpg","images/slika2.jpg","images/slika3.jpg","images/slika4.jpg",
    "images/slika5.jpg","images/slika6.jpg","images/slika7.jpg","images/slika8.jpg",
     "images/slika9.jpg","images/slika10.jpg"
];

let flippedCards = [];
let lockBoard = false;
let matchedPairs = 0;
let totalPairs = 4;
let selectedCardCount = 8;
const gameBoard = document.querySelector(".game-board");

function getRandomImages(images, count) {
    const shuffled = [...images].sort(() => Math.random() - 0.5);
    return shuffled.slice(0, count);
}

/* === DROPDOWN === */
const dropdownBtn = document.querySelector(".dropdown-button");
const dropdownMenu = document.querySelector(".dropdown-menu");

dropdownBtn.addEventListener("click", () => {
    dropdownMenu.classList.toggle("show");
});

document.addEventListener("click", (e) => {
    if (!e.target.closest(".dropdown")) {
        dropdownMenu.classList.remove("show");
    }
});

document.querySelectorAll(".dropdown-item").forEach(item => {
    item.addEventListener("click", () => {
        selectedCardCount = parseInt(item.dataset.value);
        dropdownBtn.textContent = "Broj karata: " + selectedCardCount + " ▼";
        dropdownMenu.classList.remove("show");
    });
});

/* === IGRA === */

function startGame() {
    document.body.style.background = "hsl(80, 50%, 70%)";
    document.getElementById("message").textContent = "";

    gameBoard.innerHTML = "";
    flippedCards = [];
    matchedPairs = 0;

    totalPairs = selectedCardCount / 2;
    const selectedImages = getRandomImages(allImages, totalPairs);
    let cardsArray = [...selectedImages, ...selectedImages];
    cardsArray.sort(() => Math.random() - 0.5);

    cardsArray.forEach(src => {
        const card = document.createElement("div");
        card.classList.add("card");
        card.dataset.image = src;
        card.innerHTML = `
            <div class="card-inner">
                <div class="card-front"></div>
                <div class="card-back" style="background-image: url('${src}')"></div>
            </div>
        `;
        gameBoard.appendChild(card);
    });
}

function flipCard(card) {
    if (lockBoard || card.classList.contains("flipped")) return;
    flipSound.currentTime = 0;
    flipSound.play();
    card.classList.add("flipped");
    flippedCards.push(card);
    if (flippedCards.length === 2) checkMatch();
}

function checkMatch() {
    lockBoard = true;
    const [c1, c2] = flippedCards;
    const same = c1.dataset.image === c2.dataset.image;

    if (same) {
        matchedPairs++;
        if (matchedPairs === totalPairs) {
            winSound.currentTime = 0;
            winSound.play();
            startFireworks(8000); // 4 sekunde vatrometa

            // Statična dugina zastava odozgo prema dolje
            document.body.style.background = "linear-gradient(to bottom, red, orange, yellow, green, blue, indigo, violet)";
	        document.body.style.backgroundSize = "100% 100%";
	        document.body.style.backgroundRepeat = "no-repeat";

            setTimeout(() => {
                document.getElementById("message").textContent =
                    "Čestitam! Uspješno ste prešli prvu razinu pederluka!";
            }, 600);

        } else {
            matchSound.currentTime = 0;
            matchSound.play();
        }

        flippedCards = [];
        lockBoard = false;

    } else {
        setTimeout(() => {
            c1.classList.remove("flipped");
            c2.classList.remove("flipped");
            flippedCards = [];
            lockBoard = false;
        }, 1500);
    }
}

gameBoard.addEventListener("click", e => {
    const card = e.target.closest(".card");
    if (card) flipCard(card);
});

document.getElementById("startGame").addEventListener("click", startGame);

startGame();
</script>

</body>
</html>


















